<!DOCTYPE html>
<html>
<head>
<title>Signup - Roitx</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="supabase.js"></script>
<script src="auth.js"></script>
</head>
<body>
<h1>Roitx</h1>
<h2>Create account</h2>
<input id="email" placeholder="Email"><br>
<input id="password" type="password" placeholder="Password"><br><button id="toggleSign" class="eye">ğŸ‘ï¸</button>
<button onclick="signUpUser()">Sign up</button>
    <button id="googleLogin" class="google-btn">Continue with Google</button>
<p>Already user? <a href="index.html">Login</a></p>

    

<script>
document.getElementById('toggleSign').addEventListener('click', ()=>{
  const p=document.getElementById('password'); p.type=p.type==='password'?'text':'password';
});
// password suggestion basic
const pw = document.getElementById('password');
const strength = document.getElementById('pwStrength');
pw.addEventListener('input', ()=>{
  const v=pw.value; let score=0;
  if(v.length>=8) score++; if(/[A-Z]/.test(v)) score++; if(/[0-9]/.test(v)) score++; if(/[^A-Za-z0-9]/.test(v)) score++;
  const map=['Very weak','Weak','Okay','Good','Strong']; strength.textContent = map[score];
});
document.getElementById('signupBtn').addEventListener('click', async ()=>{
  const name=document.getElementById('name').value.trim();
  const email=document.getElementById('email').value.trim();
  const password=document.getElementById('password').value;
  const msg=document.getElementById('signupMsg'); msg.textContent='Creating...';
  try{
    const {error} = await supabase.auth.signUp({email,password},{data:{name}});
    if(error) throw error;
    msg.textContent='Account created â€” go to login';
    setTimeout(()=> location.href='index.html',800);
  }catch(e){ msg.textContent = e.message || JSON.stringify(e); }
});
</script>
</body></html>
